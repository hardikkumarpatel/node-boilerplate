{"version":3,"file":"app.js","names":["require","_express","_interopRequireDefault","_cors","_morgan","_path","_helpers","_routers","_middleware","e","__esModule","default","app","express","info","error","LoggerService","logger","ExpressEngine","constructor","startExpressEngine","initializeExpressMiddleware","use","urlencoded","extended","json","limit","morgan","static","path","resolve","join","__dirname","cors","origin","methods","useHealthHelper","RootRoutes","useNotFoundHelper","useErrorMiddleware","initializeExpressEngineInstance","Promise","http","listen","port","address","process","on","close","SIGINTError","exit","_default","exports"],"sources":["../src/app.js"],"sourcesContent":["import \"dotenv/config\";\nimport express from \"express\";\nimport cors from \"cors\";\nimport morgan from \"morgan\";\nimport path from \"path\";\nimport { LoggerService, useHealthHelper, useNotFoundHelper } from \"./helpers\";\nimport RootRoutes from \"./routers\";\nimport { useErrorMiddleware } from \"./middleware\";\nconst app = express();\nconst { info, error } = new LoggerService().logger;\n\nclass ExpressEngine {\n  constructor() {\n    this.startExpressEngine();\n  }\n\n  /* EXPRESS MIDDLEWARE AND ROUTES INITIALIZATION */\n  initializeExpressMiddleware = async () => {\n    app.use(express.urlencoded({ extended: true }));\n    app.use(express.json({ limit: \"6kb\" }));\n    app.use(morgan(\"dev\"));\n    app.use(\"/public\", express.static(path.resolve(path.join(__dirname), \"src\", \"public\")));\n    app.use(\n      cors({\n        origin: \"*\",\n        methods: [\"GET\", \"HEAD\", \"PUT\", \"OPTIONS\", \"PATCH\", \"POST\", \"DELETE\"]\n      })\n    );\n    app.use(\"/health\", useHealthHelper);\n    app.use(\"/api/v1\", RootRoutes);\n    app.use(\"*\", useNotFoundHelper);\n    app.use(useErrorMiddleware);\n  };\n\n  /** INITIALIZATION EXPRESS ENGINE INSTANCE */\n  initializeExpressEngineInstance = async () => {\n    return new Promise((resolve) => {\n      const http = app.listen(3010, () => {\n        const { port } = http.address();\n        info(`Express engine is running on ${port} ðŸš€`);\n        resolve();\n      });\n      process.on(\"SIGINT\", async () => {\n        try {\n          http.close();\n        } catch (SIGINTError) {\n          error(`Error occurred during shutdown server ${SIGINTError}`);\n        } finally {\n          info(`Express engine shutdown successfully ðŸŒ±`);\n          process.exit(1); /** Exit with an error code */\n        }\n      });\n    });\n  };\n\n  startExpressEngine = async () => {\n    await this.initializeExpressMiddleware();\n    await this.initializeExpressEngineInstance();\n  };\n}\n\nexport default ExpressEngine;\n"],"mappings":"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","ignoreList":[]}