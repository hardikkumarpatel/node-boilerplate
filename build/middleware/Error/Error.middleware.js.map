{"version":3,"file":"Error.middleware.js","names":["_helpers","require","logger","LoggerService","useErrorMiddleware","err","req","res","next","statusCode","message","error","stack","errors","ApiErrorHandler","process","env","NODE_ENV","JSON","stringify","response","status","json","_default","exports","default"],"sources":["../../../src/middleware/Error/Error.middleware.js"],"sourcesContent":["import { ApiErrorHandler, LoggerService } from \"../../helpers\";\nconst logger = new LoggerService().logger;\n\nconst useErrorMiddleware = (err, req, res, next) => {\n  let { statusCode, message, error = null, stack } = err;\n  if (!statusCode) {\n    statusCode = 500;\n  }\n  const errors = new ApiErrorHandler(statusCode, message, error, stack);\n  if (process.env.NODE_ENV === \"development\") {\n    logger.error(\n      JSON.stringify(\n        {\n          ...errors,\n          message,\n          error,\n          stack\n        },\n        null,\n        2\n      )\n    );\n  }\n  const response = {\n    ...errors,\n    message,\n    error,\n    ...(process.env.NODE_ENV === \"development\" ? { stack } : {})\n  };\n  return res.status(statusCode).json(response);\n};\n\nexport default useErrorMiddleware;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,MAAMC,MAAM,GAAG,IAAIC,sBAAa,CAAC,CAAC,CAACD,MAAM;AAEzC,MAAME,kBAAkB,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAClD,IAAI;IAAEC,UAAU;IAAEC,OAAO;IAAEC,KAAK,GAAG,IAAI;IAAEC;EAAM,CAAC,GAAGP,GAAG;EACtD,IAAI,CAACI,UAAU,EAAE;IACfA,UAAU,GAAG,GAAG;EAClB;EACA,MAAMI,MAAM,GAAG,IAAIC,wBAAe,CAACL,UAAU,EAAEC,OAAO,EAAEC,KAAK,EAAEC,KAAK,CAAC;EACrE,IAAIG,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,EAAE;IAC1Cf,MAAM,CAACS,KAAK,CACVO,IAAI,CAACC,SAAS,CACZ;MACE,GAAGN,MAAM;MACTH,OAAO;MACPC,KAAK;MACLC;IACF,CAAC,EACD,IAAI,EACJ,CACF,CACF,CAAC;EACH;EACA,MAAMQ,QAAQ,GAAG;IACf,GAAGP,MAAM;IACTH,OAAO;IACPC,KAAK;IACL,IAAII,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,GAAG;MAAEL;IAAM,CAAC,GAAG,CAAC,CAAC;EAC7D,CAAC;EACD,OAAOL,GAAG,CAACc,MAAM,CAACZ,UAAU,CAAC,CAACa,IAAI,CAACF,QAAQ,CAAC;AAC9C,CAAC;AAAC,IAAAG,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEarB,kBAAkB","ignoreList":[]}